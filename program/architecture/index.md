# アーキテクチャをできるだけ簡単にとらえて活用してみよう
ソフトウェアでのアーキテクチャは、プログラムをどう構造化するか、を整理するためのものです。
構造を整理して、実装を早く/安全に（バグを出さずに）改善できるモノを作ろう、という考え方をします。

# アーキテクチャをどう実現しよう？
実際にアーキテクチャ設計を実現するには、下記2つのステップを踏みます。

1. アーキテクチャの構成要素(コンポーネント）ごとにディレクトリを作成する
    - アーキテクチャの構成要素(コンポーネント）は機能の実装（プログラム）をまとめたものになります。
    - プログラムは実際にはファイルやパッケージディレクトリになるので、コンポーネントはディレクトリで表現することができます。
2. 依存関係を整理する
    - 一般的なアーキテクチャパターンはコンポーネント間の連携方法も合わせて設定されています。
        - コンポーネント間の依存関係を設定していきます。
            - 依存するとは、ライブラリとして読み込むこととほぼ同義です。コールバックなどを利用して依存性のやじるしを逆転させることもできます。
            - 具体的には、MVCの場合、controllerがViewとModelを読み込み、ViewはModelとcontroller読み込み、Modelは独立（内部のコンポーネントを読み込まない）です

### よくあるアーキテクチャ構造をまとめよう
#### MVC
Model/View/Contolerを構成要素に持つアーキテクチャです。
歴史が非常に古く、ほとんどの人が名前は聞いたことがある、と思います。
歴史が長くそこそこシンプルな構成であることから、様々な流派・拡張が存在します。
MVVMもMVCの拡張の一つと言えます。

![MVCの構成図](img/MVC.jpg)

- View
    - ユーザーに表示する画面、オブジェクトの管理を担当します。
    - eventもViewで設定を行い、controllerを呼び出します。
        - controllerのCallbackにViewの更新関数を設定することでModelの変更後にViewの更新が動作するようにします。
- controller
    - ViewとModelのつなぎこみを担当します
    - Viewからの入力をModelに渡し、Modelからの結果を元にViewを更新します。
- Model
    - アプリケーションが利用するデータや手続きを記述します。
    - データベースとのやり取りや外部のAPIとのやり取りもModelが担当します。

現代ではViewはJSやフレームワークの機能で提供されていることがほとんどで、実装はcontrollerとModelに集中します。
また、controllerに実装が集中しすぎるという課題があります。

#### MVVM
Model/View/ViewModelを構成要素に持つアーキテクチャです。

MVCの拡張で、Viewの

![MVCの構成図](img/MVC.jpg)

- View
    - ユーザーに表示する画面、オブジェクトの管理を担当します。
    - eventもViewで設定を行い、controllerを呼び出します。
        - controllerのCallbackにViewの更新関数を設定することでModelの変更後にViewの更新が動作するようにします。
- ViewModel
    - ViewとModelのつなぎこみを担当します
    - Viewからの入力をModelに渡し、Modelからの結果を元にViewを更新します。
- Model
    - アプリケーションが利用するデータや手続きを記述します。
    - データベースとのやり取りや外部のAPIとのやり取りもModelが担当します。

実のところ、現代ではViewはJSやフレームワークの機能で提供されていることがほとんどで、実装はcontrollerとModelに集中します。



#### クリーンアーキテクチャ


# 補足
## 制御の反転と依存性の注入について
